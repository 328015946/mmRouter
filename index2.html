<!DOCTYPE html>

<html>
    <head>
        <title>路由器的相关测试</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <script src="avalon.js">

        </script>
        <script>
            require(["ready!", "mmState"], function() {
                var model = avalon.define("test", function(vm) {
                    vm.hash = function(a, e) {
                        location.hash = a
                        e.preventDefault()
                    }
                })
                avalon.state("home", {
                    controller: "test",
                    url: "/",
                    template: '<p class="lead">Welcome to the UI-Router Demo</p>' +
                            '<p>Use the menu above to navigate. ' +
                            'Pay attention to the <code>$state</code> and <code>$stateParams</code> values below.</p>' +
                            '<p>Click these links—<a href="#/c?id=1">Alice</a> or ' +
                            '<a href="#/user/42">Bob</a>—to see a url redirect in action.</p>'
                })
                avalon.state("about", {
                    controller: "test",
                    url: "/about",
                    templateProvider: new Promise(function(fn) {
                        fn('<p class="lead">UI-Router Resources</p><ul>' +
                                '<li><a href="https://github.com/angular-ui/ui-router/tree/master/sample">Source for this Sample</a></li>' +
                                '<li><a href="https://github.com/angular-ui/ui-router">Github Main Page</a></li>' +
                                '<li><a href="https://github.com/angular-ui/ui-router#quick-start">Quick Start</a></li>' +
                                '<li><a href="https://github.com/angular-ui/ui-router/wiki">In-Depth Guide</a></li>' +
                                '<li><a href="https://github.com/angular-ui/ui-router/wiki/Quick-Reference">API Reference</a></li>' +
                                '</ul>')
                    })
                })

                avalon.state("contacts", {
                    controller: "test",
                    abstract: true,
                    url: "/contacts",
                    templateUrl: "contacts.html",
                    callback: function() {
                        if (!avalon.vmodels.contacts) {
                            avalon.define({
                                $id: "contacts",
                                contacts: [
                                    {id: 1, name: "司徒正美"}, {id: 2, name: "清风火羽"}
                                ]
                            })
                        }
                    }
                })
                avalon.state("contacts.list", {
                    controller: "test",
                    url: "",
                    templateUrl: "contacts.list.html",
                })
                avalon.history.start({
                    basepath: "/mmRouter"
                })
                avalon.scan()
            })



//http://angular-ui.github.io/ui-router/sample/#/contacts/42
        </script>


    </head>
    <body>
        <div ms-controller="test">
            <div>
                <a href="#!/">mmState</a>  <a href="#!/contacts">contacts</a>  <a href="#!/about">about</a>
            </div>

            <div ms-view></div>
        </div>

    </body>
</html>
